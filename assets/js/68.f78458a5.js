(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{512:function(s,a,t){"use strict";t.r(a);var n=t(3),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[s._v("#")]),s._v(" 准备工作")]),s._v(" "),a("p",[s._v("1.首先你需要一台云服务器，最好是Linux的，可以选择CentOs或者Ubutun")]),s._v(" "),a("p",[s._v("2.可以买一个便宜的域名，用于地址解析。")]),s._v(" "),a("h2",{attrs:{id:"配置服务器的免密登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置服务器的免密登录"}},[s._v("#")]),s._v(" 配置服务器的免密登录")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("免密登录究极概括版")]),a("p",[s._v("本地:\nssh-keygen #生成公钥私钥")]),s._v(" "),a("p",[s._v("ssh-copy-id qly@xxx.xxx.xxx.xxx #服务器需要有qly这个用户\n输完密码即可")])]),a("h3",{attrs:{id:"_1-进入你的服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-进入你的服务器"}},[s._v("#")]),s._v(" 1.进入你的服务器")]),s._v(" "),a("p",[s._v("输入")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@xxx.xxx.xxx.xxx     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入你的服务器，xxx.xxx.xxx.xxx是你服务器的公网IP")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("提示")]),a("p",[s._v("第一次登录会有如下提示：")]),s._v(" "),a("p",[a("code",[s._v("The authenticity of host '123.57.47.211 (123.57.47.211)' can't be established. ECDSA key fingerprint is SHA256:iy237yysfCe013/l+kpDGfEG9xxHxm0dnxnAbJTPpG8. Are you sure you want to continue connecting (yes/no/[fingerprint])?")])]),s._v(" "),a("p",[s._v("这时输入yes，回车即可，服务器信息会被记录在~/.ssh/known_hosts文件中（这是在你的本地电脑里，而非云服务器）")])]),a("p",[s._v("默认登录端口号为22。如果想登录某一特定端口：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" user@hostname "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-创建一个新的用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建一个新的用户"}},[s._v("#")]),s._v(" 2.创建一个新的用户")]),s._v(" "),a("p",[s._v("root用户权限较大，容易不小心删库,root用户如果删库了，服务器大概没救了。")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"title"},[s._v("注意")]),a("p",[s._v("现在是在你的云服务器里")])]),a("p",[s._v("输入以下指令")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("adduser xxx    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建一个用户，xxx是你的新用户名,输完以后看提示然后设置密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-aG")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" xxx     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#给你这个新的用户分配sudo权限,回车以后无任何提示")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_3-配置映射信息-可以跳过"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置映射信息-可以跳过"}},[s._v("#")]),s._v(" 3.配置映射信息（可以跳过）")]),s._v(" "),a("p",[s._v("打开git bash，输入以下指令")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/.ssh   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入.ssh文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" config  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#浏览文件config")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("在config文件里面先不要轻举妄动，按"),a("code",[s._v("i")]),s._v("键，可以进入输入模式,输入以下指令（手打）\n"),a("code",[s._v("Host")]),s._v("后面的是给你的服务器取的任意名字,"),a("code",[s._v("HostName")]),s._v(" 后面则是服务器公网IP,"),a("code",[s._v("User")]),s._v("后面则是你的新用户名")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("Host space              \n    HostName xxx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("xxx\n    User qly\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("输入完毕以后，按下ESC退出输入模式，再按"),a("code",[s._v("Shift + :")]),s._v("输入wq,即可退出vim。")]),s._v(" "),a("h3",{attrs:{id:"_4-把公钥传给服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-把公钥传给服务器"}},[s._v("#")]),s._v(" 4.把公钥传给服务器")]),s._v(" "),a("p",[s._v("在你的本地机器输入以下指令，值得注意的是，请把qly换成"),a("strong",[s._v("你设置的用户名")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("ssh-copy-id space "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果你跳过了上面的第三步，则把space换成qly@xxx.xxx.xxx.xxx的形式")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("回车完以后再输一遍你的密码即可")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("提示")]),a("p",[s._v("显示如下即为成功")]),s._v(" "),a("p",[a("code",[s._v("Now try logging into the machine, with: \"ssh 'space'\" and check to make sure that only the key(s) you wanted were added.")])])]),a("p",[s._v("到这里为止,用户名qly已经可以免密登录了。")]),s._v(" "),a("h2",{attrs:{id:"安装tmux和docker镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装tmux和docker镜像"}},[s._v("#")]),s._v(" 安装tmux和docker镜像")]),s._v(" "),a("h3",{attrs:{id:"_1-安装tmux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装tmux"}},[s._v("#")]),s._v(" 1.安装tmux")]),s._v(" "),a("p",[s._v("进入你的服务器(qly用户)，输入以下指令(shift + insert可进行粘贴)")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#更新apt包索引,回车以后输入密码即可")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" tmux   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装tmux,tmux可防止意外关闭而终结进程，也可以防止挂机时间过长而断开服务器连接")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("输入")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tmux\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("即可进入tmux界面,"),a("code",[s._v("CTRL + D")]),s._v(" 可以退出tmux界面")]),s._v(" "),a("h3",{attrs:{id:"_2-安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装docker"}},[s._v("#")]),s._v(" 2.安装docker")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"title"},[s._v("注意")]),a("p",[s._v("如果你之前安装过docker,请先卸载它。根据下面的文档执行卸载操作，我相信你找得到的。")])]),a("p",[s._v("根据不同的系统选择不同的"),a("a",{attrs:{href:"https://docs.docker.com/engine/",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker安装文档(英文)"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("这里以ubuntu为例。")]),s._v(" "),a("p",[s._v("根据文档，首先创建docker仓库。进入tmux执行下列语句，使用shift + insert可粘贴到tmux")]),s._v(" "),a("h4",{attrs:{id:"添加docker官方gpg密钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加docker官方gpg密钥"}},[s._v("#")]),s._v(" 添加docker官方GPG密钥")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Add Docker's official GPG key:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ca-certificates "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" 0755 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" /etc/apt/keyrings\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://download.docker.com/linux/ubuntu/gpg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" /etc/apt/keyrings/docker.asc\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" a+r /etc/apt/keyrings/docker.asc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("输完密码以后进入下一步。")]),s._v(" "),a("h4",{attrs:{id:"设置稳定版仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置稳定版仓库"}},[s._v("#")]),s._v(" 设置稳定版仓库")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb [arch='),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("dpkg --print-architecture"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/os-release "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$VERSION_CODENAME")]),s._v('"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(' stable"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/apt/sources.list.d/docker.list "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /dev/null\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"安装docker-engine-community"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker-engine-community"}},[s._v("#")]),s._v(" 安装Docker Engine-Community")]),s._v(" "),a("p",[s._v("输入")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("输入y,等待下载完成即可。下载速度取决于你的服务器带宽，比较慢的话，可以选择"),a("strong",[s._v("直接关闭")]),s._v("git窗口，它自己会在服务器里下载。若干时间以后，重新登录服务器，输入指令"),a("code",[s._v("tmux a")]),s._v("即可回归原来的界面。")]),s._v(" "),a("p",[s._v("下载完以后执行")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("若有信息提示，但是Permision deny则输入以下指令给docker sudo权限")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-aG")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("回车以后输入密码，完成以后不会有任何提示。这时退出tmux再退出服务器，重新登录一下服务器，再回到tmux，这时候再次输入")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("若显示")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("REPOSITORY   TAG       IMAGE ID   CREATED   SIZE\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("则说明安装完成啦。")]),s._v(" "),a("h2",{attrs:{id:"拉取一个基础镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拉取一个基础镜像"}},[s._v("#")]),s._v(" 拉取一个基础镜像")]),s._v(" "),a("p",[s._v("镜像源有多个，docker官方那个巨慢无比，所以我们一般选择其他的。")]),s._v(" "),a("h3",{attrs:{id:"修改镜像源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改镜像源"}},[s._v("#")]),s._v(" 修改镜像源")]),s._v(" "),a("p",[s._v("这里选择了"),a("a",{attrs:{href:"https://cloud.tencent.com/document/product/1207/45596",target:"_blank",rel:"noopener noreferrer"}},[s._v("腾讯的镜像源"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("进入你的服务器，可以在tmux界面，也可以不在（用户为qly）,输入")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/docker/daemon.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("按i键进入输入模式，将以下内容粘贴进去")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://mirror.ccs.tencentyun.com"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("按ESC退出输入模式，输入:wq即可退出保存。如果你退不出去，就是说明你的权限不够，输入:qa!即可强行退出，但是没有保存文件，你需要在vim的前面加上sudo。")]),s._v(" "),a("p",[s._v("完事了以后输入这个,拉取ubuntu的基础镜像,"),a("strong",[s._v("你最好别拉基础镜像，拉个有nginx的镜像比较好")]),s._v("，想要其他版本的话自己看着调整。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull ubuntu\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("完事了以后，输入"),a("code",[s._v("docker images")]),s._v("查看拉取的镜像。")]),s._v(" "),a("h2",{attrs:{id:"使用镜像启动一个容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用镜像启动一个容器"}},[s._v("#")]),s._v(" 使用镜像启动一个容器")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--network")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" blog ubuntu \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("--network host")]),s._v("意为容器使用服务器本机的网络，防止容器内部无法使用网络，"),a("code",[s._v("--name blog")]),s._v("后面是你随便取的一个名,这里取名为blog,ubuntu就是你拉的镜像的名，还有其他的设置，如有需要请先百度。")]),s._v(" "),a("p",[s._v("输完指令以后就会自动进入这个容器，你可以选择再配一遍这个容器的免密登录，嫌麻烦的话，也可以不配。但要记住你这个容器的名字，忘记了的话请参考"),a("a",{attrs:{href:"https://www.runoob.com/docker/docker-command-manual.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker教程"),a("OutboundLink")],1),s._v(",这里列出几个例子。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看docker镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" start blog   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动名为blog的容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" attach blog  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入名为blog的容器内部")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看当前运行的容器信息，当然也有名字")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" start blog   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动名为blog的容器。如果提示你的容器已经停止，则执行此条")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" blog      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除名为blog的容器")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("容器启动以后，就变成了一个虚拟的服务器，你在里面乱搞，都不会影响到你租的那个服务器的。而且还可以通过镜像重置虚拟服务器，安全且快捷。")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"title"},[s._v("注意")]),a("p",[s._v("想从容器回到你的服务器，千万不用要"),a("code",[s._v("CTRL + C")]),s._v("，这样会关闭容器。先"),a("code",[s._v("CTRL + P")]),s._v("再"),a("code",[s._v("CTRL + Q")]),s._v("就可以离开容器，但是不关闭容器啦。")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("提示")]),a("p",[s._v("容器可以无限套娃，在容器里面安装docker并拉取一个镜像，然后通过镜像启动容器。这样一来，容器的容器启动了，重复刚才的操作，容器的容器的容器启动了...")])]),a("h2",{attrs:{id:"使用nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用nginx"}},[s._v("#")]),s._v(" 使用Nginx")]),s._v(" "),a("p",[s._v("本节请参考"),a("a",{attrs:{href:"https://cn.linux-console.net/?p=14930#:~:text=%E5%A6%82%E4%BD%95%E5%9C%A8%20Ubuntu%2022.04%20%E4%B8%8A%E5%AE%89%E8%A3%85%20NGINX%20%E6%9C%AC%E8%8A%82%E5%88%97%E5%87%BA%E4%BA%86%E4%BB%8E%20Ubuntu%2022.04,install%20nginx%20%E7%AC%AC%203%20%E6%AD%A5%EF%BC%9A%20%E9%80%9A%E8%BF%87%E6%A3%80%E6%9F%A5%20NGINX%20%E7%89%88%E6%9C%AC%E6%9D%A5%E9%AA%8C%E8%AF%81%E5%AE%89%E8%A3%85%EF%BC%9A",target:"_blank",rel:"noopener noreferrer"}},[s._v("如何在 Ubuntu 22.04 上安装 NGINX"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"title"},[s._v("注意")]),a("p",[s._v("我的评价是不如拉一个有nginx的镜像，基础镜像啥都没有，如果你的镜像里面有nginx，那么直接跳过这一步即可。")])]),a("p",[s._v("nginx可作为静态页面的web服务器,nginx的其他功能这里暂时不提，感兴趣的请参考"),a("a",{attrs:{href:"https://nginx.org/en/",target:"_blank",rel:"noopener noreferrer"}},[s._v("nginx官方文档"),a("OutboundLink")],1),s._v("。如果你的网站需要java后端，那么还需要再配置一个tomcat才行。这里配置的网站是纯页面的形式，没有任何后端。")]),s._v(" "),a("h3",{attrs:{id:"配置nginx所需环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx所需环境"}},[s._v("#")]),s._v(" 配置nginx所需环境")]),s._v(" "),a("p",[s._v("首先需要进入你的容器,你要是没用上容器的话，就太对不起之前配docker的这些操作了。接下来，你可以选择安装tmux来进行操作，当然也可以不用。不过为了以防万一，还是得使用它。需要重复安装tmux的操作吗？好的，再告诉你一次，下次可要记住了哦。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" tmux   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装tmux")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装sudo")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装vim")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("好了进入tmux以后，就可以正式开始配置环境了。")]),s._v(" "),a("p",[s._v("执行以下指令：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("unminimize "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#一路y下去即可，如果还有报错，请根据报错信息寻找答案")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("提示")]),a("p",[a("code",[s._v("unminimize")]),s._v("这条指令可以将基础版ubuntu容器变为完整版")])]),a("h3",{attrs:{id:"安装nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装nginx"}},[s._v("#")]),s._v(" 安装nginx")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.cn/post/7286310628352557117",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装过程参考文档"),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"卸载nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载nginx"}},[s._v("#")]),s._v(" 卸载nginx")]),s._v(" "),a("p",[s._v("如果你之前安装过，请先卸载")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" remove nginx nginx-common\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" purge nginx nginx-common\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" autoremove\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" remove nginx-full nginx-common\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"开始安装新的nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始安装新的nginx"}},[s._v("#")]),s._v(" 开始安装新的nginx")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#更新")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx-full "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装,nginx-full是带有ssl模块的方便未来配置https")]),s._v("\nnginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看版本")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("提示")]),a("p",[s._v("nginx的配置文件：")]),s._v(" "),a("p",[a("code",[s._v("/usr/sbin/nginx")]),s._v("：主程序")]),s._v(" "),a("p",[a("code",[s._v("/etc/nginx")]),s._v("：存放配置文件(nginx.conf)")]),s._v(" "),a("p",[a("code",[s._v("/usr/share/nginx")]),s._v("：存放静态文件")]),s._v(" "),a("p",[a("code",[s._v("/var/log/nginx")]),s._v("：存放日志")])]),a("h3",{attrs:{id:"配置监听端口号、访问ip和代理跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置监听端口号、访问ip和代理跨域"}},[s._v("#")]),s._v(" 配置监听端口号、访问IP和代理跨域")]),s._v(" "),a("p",[s._v("nginx.conf可以通过引入其他文件进行配置，我们可以特地创个文件夹来放这种配置文件。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/nginx\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" configs\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" configs\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" blog.conf "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#blog你可以随便取名")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("在blog.conf添加以下信息:")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("提示")]),a("p",[a("code",[s._v("vim")]),s._v("在普通模式下键入"),a("code",[s._v("ggdG")]),s._v("可以删除所有,"),a("code",[s._v(":set paste")]),s._v("可进行粘贴否则"),a("code",[s._v("vim")]),s._v("会缩进")]),s._v(" "),a("p",[s._v("因为存在中文，我的建议是一行一行粘贴，顺便修改对应的内容，粘贴中文会出现乱码")])]),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        listen       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自己设置端口号")]),s._v("\n        server_name  localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自己服务器的ip地址 ip!")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#access_log  logs/host.access.log  main;")]),s._v("\n        location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            root   /usr/share/nginx/dist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里写项目打包好的dist文件的地址，可以改，这个随意")]),s._v("\n            index  index.html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要保证dist中有index.html文件")]),s._v("\n            try_files "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ @router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        error_page   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("503")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("504")]),s._v("  /50x.html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#错误页面")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("加完以后记得修改注释对应的地方，:wq退出，再执行下列指令：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/nginx\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" nginx.conf \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("切换为输入模式，一直"),a("strong",[s._v("往下")]),s._v("，在另外"),a("strong",[s._v("两个")]),a("code",[s._v("include")]),a("strong",[s._v("下面")]),s._v("的位置加上这句话,注意要加上分号：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("include /etc/nginx/configs/*.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"启动nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动nginx"}},[s._v("#")]),s._v(" 启动nginx")]),s._v(" "),a("p",[s._v("输入以下指令以启动nginx")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("systemctl start nginx\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /etc/init.d/nginx start "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果上一条指令不行就用这一条")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("下面是nginx的一些操作指令：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("systemctl start nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动")]),s._v("\nsystemctl stop nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止")]),s._v("\nsystemctl reload nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重载")]),s._v("\nsystemctl status nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看状态")]),s._v("\nsystemctl restart nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启 ")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#systemctl 用不了的话则改成下面的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /etc/init.d/nginx start\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /etc/init.d/nginx stop\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /etc/init.d/nginx reload\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /etc/init.d/nginx status\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /etc/init.d/nginx restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"title"},[s._v("注意")]),a("p",[s._v("启动会出现两种结果：")]),s._v(" "),a("p",[s._v("1.显示"),a("code",[s._v("OK")]),s._v(",启动完成！")]),s._v(" "),a("p",[s._v("2.显示"),a("code",[s._v("Fail")]),s._v(",那么需要"),a("code",[s._v("cd /var/log/nginx")]),s._v("，"),a("code",[s._v("sudo vim error.log")]),s._v("查看看报错信息，有可能是语法错误，比如少了分号。")])]),a("p",[s._v("成功了那么就基本完事了。你可以在浏览器里面输入你服务器的IP地址，如果看到了Nginx的欢迎界面，说明nginx已经完成。")]),s._v(" "),a("h2",{attrs:{id:"上传静态页面文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上传静态页面文件"}},[s._v("#")]),s._v(" 上传静态页面文件")]),s._v(" "),a("p",[s._v("找到你本机的项目里已经构建好的dist文件，右击空白处，打开git bash。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("提示")]),a("p",[s._v("如果你给容器配备了免密登录，那么直接执行：")]),s._v(" "),a("p",[a("code",[s._v("scp -r dist NAME:/usr/share/nginx/dist")]),s._v(",记得把"),a("code",[s._v("NAME")]),s._v("换成你容器免密登录时设置的HOST名，执行完就ok了。")])]),a("p",[s._v("首先将dist文件传递到你的服务器里面，然后再传到容器里面")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" dist space:blog/web  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#传给服务器blog/web的目录下，没有目录则在服务器里新建一个再传，当然不建也可以的。反正就是找个地方放文件而已。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" blog/web/dist a64221036ee1:/usr/share/nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sudo docker cp 主机目录 容器ID:容器目录")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("如果你不知道容器的ID,那么需要在服务器里执行"),a("code",[s._v("docker ps")]),s._v(",这样就能看到啦。")]),s._v(" "),a("p",[s._v("做完这些，你再试试访问你的服务器IP地址，应该就出来啦~")]),s._v(" "),a("h2",{attrs:{id:"编写一个用于部署的脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写一个用于部署的脚本"}},[s._v("#")]),s._v(" 编写一个用于部署的脚本")]),s._v(" "),a("p",[s._v("每次重新传文件，这样做太麻烦了，把命令全部写在一个脚本里，就可以一键执行了。")]),s._v(" "),a("p",[s._v("我的脚本只是一种参考，")]),s._v(" "),a("p",[s._v("在和dist文件夹同一目录下面，新建一个"),a("code",[s._v("deploy_server.sh")]),s._v("文件,并输入：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#此处脚本用于将构建好的dist文件上传至服务器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" dist space:blog/web "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#传文件给服务器")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" space "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./update_blog.sh'")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#登录服务器，执行脚本update_blog.sh")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("然后登录你的服务器，输入以下指令:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" update_blog.sh \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("并在里面粘贴这些内容：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" blog/web/dist a64221036ee1:/usr/share/nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("完事以后退出vim界面，再输入以下指令")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x update_blog.sh "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#赋予权限，如果你ls的话，可以发现这个文件变绿了。")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这样一来就OK了，当你Build完这个项目的时候，就进入dist的同一目录，点击执行"),a("code",[s._v("deploy_server.sh")]),s._v("就可以一键完成部署更新啦。")]),s._v(" "),a("h2",{attrs:{id:"不同域名访问对应的容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不同域名访问对应的容器"}},[s._v("#")]),s._v(" 不同域名访问对应的容器")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://kejiweixun.com/blog/run-multiple-docker-container-on-one-server",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);